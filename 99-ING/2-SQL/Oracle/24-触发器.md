# **24 - 触发器**
[<<返回首页](database/Oracle.md)

## 触发器简介
触发器的定义就是说**某个条件成立的时候，触发器里面所定义的语句就会被自动的执行**。  
因此触发器不需要人为的去调用，也不能调用。然后，触发器的触发条件其实在你定义的时候就已经设定好了。

这里面需要说明一下，触发器可以分为**语句级**触发器和**行级**触发器。  
> 简单的说就是语句级的触发器可以在某些语句执行前或执行后被触发。  
> 而行级触发器则是在定义的了触发的表中的行数据改变时就会被触发一次。

具体举例：
- 1. 在一个表中定义的语句级的触发器，当这个表被删除时，程序就会自动执行触发器里面定义的操作过程。这个就是删除表的操作就是触发器执行的条件了。
- 2. 在一个表中定义了行级的触发器，那当这个表中一行数据发生变化的时候，比如删除了一行记录，那触发器也会被自动执行了。
​

## 触发器语法
`create [or replace] tigger 触发器名 触发时间 触发事件`  
`on 表名`  
`[for each row]`  
`begin`  
`pl/sql语句`  
`end`  

其中：
- **触发器名**：触发器对象的名称。由于触发器是数据库自动执行的，因此该名称只是一个名称，没有实质的用途。
- **触发时间**：指明触发器何时执行，该值可取：
- **before**：表示在数据库动作之前触发器执行;
- **after**：表示在数据库动作之后触发器执行。
- **触发事件**：指明哪些数据库动作会触发此触发器：
- **insert**：数据库插入会触发此触发器;
- **update**：数据库修改会触发此触发器;
- **delete**：数据库删除会触发此触发器。
- **表 名**：数据库触发器所在的表。
- **for each row**：对表的每一行触发器执行一次。如果没有这一选项，则只对整个表执行一次。
​

## 功能：
> 1. 允许/限制对表的修改  
2. 自动生成派生列，比如自增字段  
3. 强制数据一致性  
4. 提供审计和日志记录  
5. 防止无效的事务处理  
6. 启用复杂的业务逻辑  
