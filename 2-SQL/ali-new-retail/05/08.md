# 技术面试（初级）

从开发角度审视数据库的设计细节，就如同前面讲解的几个知识点。

要点回顾：

- 为了方便把数据迁移到集群，主键该不该用 UUID

- 订单号与流水号是不是一回事？

  订单号必须满足唯一性，而流水号不用满足强一致性

  流水号能携带比订单号更多的信息

- 如果系统上线了，你这么维护表结构？

  不影响业务的维护操作可以在线执行，先做好备份。

  影响业务的维护操作，要使用专门的工具，如 PerconaToolkit 工具

- 系统内部的业务图片怎么存储？

  小型方案：使用图床服务器， nginx 或云存储

  专业方案：使用 MongoDB 的 GridFS 搭建集群图床服务器

- 你们系统的负载怎么样？

  读多写少的方案：MySQL + NoSQL

  写多读少的方案：MySQL + TokuDB

- 数据表用逻辑删除还是物理删除？

  使用逻辑删除，定时归档历史表

- 数据记录很多的时候，如何对分页语句优化？

  用主键索引加速，然后用表连接获取具体数据。

- 怎么避免并发操作的时候，数据不一致的问题？

  使用乐观锁机制，在数据中加上版本号字段，先获取版本号，再更新的时候使其作为条件，因为由行级锁，所以在数据库层面会保证这个版本号判定是原子的。别的事务修改成功之后，你拿到的版本号就对不上，修改失败了